!function(){var i,r,t;function o(){return"undefined"!=typeof T&&T.version}function s(n){this._T=n}function e(n){this.timbre=n}function f(n){return n&&n.noteOn instanceof Function&&n.noteOff instanceof Function}JZZ&&(JZZ.synth||(JZZ.synth={}),i={},r=[],t=o()?T.version:void 0,s.prototype._receive=function(n){var t=n[0],e=n[1],n=n[2];t<0||255<t||(9==(t>>=4)?n?this._T.noteOn(e,n):this._T.noteOff(e):8==t?this._T.noteOff(e):11==t&&(123==e?this._T.allNoteOff():120==e&&this._T.allSoundOff()))},e.prototype._info=function(n){return{type:"Timbre.js",name:n=n||"JZZ.synth.Timbre",manufacturer:"virtual",version:t}},e.prototype._openOut=function(n,t){var e;o()?f(this.timbre)?(void 0!==t?(i[t=""+t]||(i[t]=new s(this.timbre)),e=i[t]):(e=new s(this.timbre),r.push(e)),n._info=this._info(t),n._receive=function(n){e._receive(n)},n._resume()):n._crash("Not a valid synth"):n._crash("Timbre.js is not loaded")},JZZ.synth.Timbre=function(){var n,t=1==arguments.length?arguments[0]:(n=arguments[0],arguments[1]);return JZZ.lib.openMidiOut(n,new e(t))},JZZ.synth.Timbre.register=function(){var n,t=1==arguments.length?arguments[0]:(n=arguments[0],arguments[1]);return n=n||"JZZ.synth.Timbre",!(!o()||!f(t))&&JZZ.lib.registerMidiOut(n,new e(t))})}();
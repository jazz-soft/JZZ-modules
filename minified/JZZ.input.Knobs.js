!function(){function a(a,b){return a?a:b}function b(a){var b={};for(var c in a)b[c]=a[c];return b}function c(a){return"undefined"==typeof a.buttons||a.buttons!=w?a:(a.stopPropagation(),0==a.button?{buttons:1^w}:1==a.button?{buttons:4^w}:2==a.button?{buttons:2^w}:void 0)}function d(a){return"undefined"==typeof a.buttons?!a.button:1&a.buttons}function e(a){return"undefined"==typeof a.buttons?!a.button:!(1&a.buttons)}function f(){return!1}function g(a,b){for(var c in b)a.style[c]=b[c]}function h(a){if(this.base=.5,this.val=.5,this.msb=0,this.lsb=0,this.chan=0,a instanceof Array){if(1!=a.length&&2!=a.length)return;if(2==a.length){if(a[1]!=parseInt(a[1])||a[1]<1||a[1]>127)return;this.msb=a[0],a[1]!=a[0]&&(this.lsb=a[1])}else this.msb=a[0]}else if(a==parseInt(a)){if(a<1||a>127)return;this.msb=a}else{var b={mod:[1,33],breath:[2,34],foot:[4,36],portamento:[5,37],volume:[7,39],balance:[8,40],pan:[10,42],expression:[11,43],effect1:[12,44],effect2:[13,45]}[a];b&&(this.msb=b[0],this.lsb=b[1])}this.msb&&7!=this.msb&&8!=this.msb&&10!=this.msb&&(this.base=0),this.val=-1,this.setValue(this.base)}function i(a,b,c,d,e,f){this.ctrl=a,this.span=b,this.inner=c,this.stl=d,this.stl0=e,this.stl1=f}function j(){}function k(a,c){this.bins=[],this.params={0:{}},"undefined"==typeof a&&(a={}),"undefined"==typeof c&&(c={}),this.chan=z[a.chan],"undefined"==typeof this.chan&&(this.chan=0);var d;for(d in a)if(d==parseInt(d))this.params[d]=b(a[d]);else{if("chan"==d)continue;c[d]=a[d]}for(d in this.params){this.bins.push(d);for(var e in c)"from"!=e&&"to"!=e||"undefined"!=typeof _keyNum(this.params[d][e])||(this.params[d][e]=c[e]),e in this.params[d]||(this.params[d][e]=c[e])}this.bins.sort(function(a,b){return a-b})}function l(a){return function(b){w=b.buttons,d(b)&&a.onMouseDown(b)}}function m(a){return function(b){w=b.buttons,a.onMouseMove(b)}}function n(a){return function(b){b=c(b),e(b)&&(window.removeEventListener("mousemove",a.mouseMove),window.removeEventListener("mouseup",a.mouseUp),a.dragX=void 0,a.restyle(),a.onMouseUp(b)),w=b.buttons}}function o(a){return function(b){a.onTouchStart(b)}}function p(a){return function(b){a.onTouchMove(b)}}function q(a){return function(b){a.onTouchEnd(b)}}function r(a){a.preventDefault()}function s(a){k.call(this,a,{pos:"N",rw:2,rh:128,kw:24,kh:16})}function t(a){k.call(this,a,{pos:"N",rw:128,rh:128,kw:24,kh:16})}function u(){}function v(){}if(JZZ){JZZ.input||(JZZ.input={});for(var w,x="0.5",y={margin:0,padding:0,width:"100%",height:"100%"},z={a:10,b:11,c:12,d:13,e:14,f:15,A:10,B:11,C:12,D:13,E:14,F:15},A=0;A<16;A++)z[A]=A;h.prototype.setBase=function(a){a=parseFloat(a),!isNaN(a)&&isFinite(a)&&a>=0&&a<=1&&(this.base=a)},h.prototype.setValue=function(a){if(a=parseFloat(a),!(isNaN(a)||!isFinite(a)||a<0||a>1||a==this.val))return this.val=a,this.num=Math.round(a*(this.lsb||!this.msb?16383:127)),!0},h.prototype.emit=function(a){this.msb?this.lsb?(a.emit([176+this.chan,this.msb,this.num>>7]),a.emit([176+this.chan,this.lsb,127&this.num])):a.emit([176+this.chan,this.msb,this.num]):a.emit([224+this.chan,127&this.num,this.num>>7])},h.prototype.read=function(a){if(!this.msb&&a[0]==224+this.chan&&a[1]==parseInt(a[1])&&a[2]==parseInt(a[2]))return this.num=a[2]<<7|127&a[1],this.val=this.num/16383,!0;if(this.msb&&a[0]==176+this.chan&&a[2]==parseInt(a[2])){if(a[1]==this.msb)return this.lsb?(this.num=a[2]<<7|127&this.num,this.val=this.num/16383):(this.num=127&a[2],this.val=this.num/127),!0;if(a[1]==this.lsb)return this.num=16256&this.num|127&a[2],this.val=this.num/16383,!0}},i.prototype.setInnerHTML=function(a){return this.inner.innerHTML=a,this},i.prototype.setStyle=function(a,b){"undefined"==typeof b&&(b=a);for(var c in a)this.stl0[c]=a[c];for(var c in b)this.stl1[c]=b[c];return g(this.span,this.ctrl.isSelected()?this.stl1:this.stl0),g(this.span,this.stl),this},j.prototype._close=function(){this.parent&&(this.parent.innerHTML=""),this.mouseUpHandler&&window.removeEventListener("mouseup",this.mouseUpHandler)},j.prototype.create=function(){for(var a=0,b=0;b<this.bins.length&&this.bins[b]<=window.innerWidth;b++)a=this.bins[b];this.current=this.params[a],this.createCurrent()},j.prototype.createCurrent=function(){this.parent&&(this.parent.innerHTML=""),"string"==typeof this.current.parent&&(this.current.parent=document.getElementById(this.current.parent));try{this.createAt(this.current.parent)}catch(a){this.bottom||(this.bottom=document.createElement("div"),document.body.appendChild(this.bottom)),this.createAt(this.bottom)}},j.prototype.onResize=function(){for(var a=0,b=0;b<this.bins.length&&this.bins[b]<=window.innerWidth;b++)a=this.bins[b];this.current!=this.params[a]&&(this.current=this.params[a],this.createCurrent())},j.prototype.settings=function(){return b(this.current)},j.prototype.isSelected=function(){return"undefined"!=typeof this.dragX},j.prototype.restyle=function(){for(var a in this.spans)this.spans[a].setStyle()},j.prototype.onMouseDown=function(a){"undefined"==typeof this.dragX&&(this.dragX=a.clientX,this.dragY=a.clientY,this.mouseMove=m(this),this.mouseUp=n(this),window.addEventListener("mousemove",this.mouseMove),window.addEventListener("mouseup",this.mouseUp),this.restyle())},j.prototype.onMouseMove=function(a){"undefined"!=typeof this.dragX&&this.onMove(a.clientX,a.clientY)},j.prototype.onMouseUp=function(a){},j.prototype.onTouchStart=function(a){a.preventDefault(),"undefined"==typeof this.dragX&&(this.touch=a.targetTouches[0].identifier,this.dragX=a.targetTouches[0].clientX,this.dragY=a.targetTouches[0].clientY,this.restyle())},j.prototype.onTouchMove=function(a){if(a.preventDefault(),"undefined"!=typeof this.dragX&&"undefined"!=typeof this.touch)for(var b in a.targetTouches)if(a.targetTouches[0].identifier==this.touch)return void this.onMove(a.targetTouches[b].clientX,a.targetTouches[b].clientY)},j.prototype.onTouchEnd=function(a){a.preventDefault(),this.touch=void 0,this.dragX=void 0,this.restyle(),this.onMouseUp(a)},s.prototype=new j,s.prototype.createAt=function(a){a.innerHTML="";var b=parseInt(this.current.bh),c=parseInt(this.current.bw),d=parseInt(this.current.rh);d||(d=128),this.rh=d;var e=parseInt(this.current.rw);e||(e=2);var j=parseInt(this.current.kh);j||(j=24);var k=parseInt(this.current.kw);k||(k=16);var m=this.current.pos.toUpperCase();this.pos=m,this.data||(this.data=new h(this.current.data),this.data.chan=this.chan,this.data.setBase(this.current.base),this.data.setValue(this.current.val)),this.dx=-(k/2),this.dy=-(j/2+1),b||(b=j+d+2),c||(c=(k>e?k:e)+2),this.stlB={display:"inline-block",position:"relative",margin:"0",padding:"0",userSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",MsUserSelect:"none",OUserSelect:"none",WebkitUserSelect:"none"},this.stlB0={borderStyle:"none"},this.stlB1={borderStyle:"none"},this.stlR={display:"inline-block",position:"absolute",margin:"0",padding:"0",borderStyle:"solid",borderWidth:"1px"},this.stlR0={backgroundColor:"#aaa"},this.stlR1={backgroundColor:"#bbb"},this.stlK={display:"inline-block",position:"absolute",margin:"0",padding:"0",borderStyle:"solid",borderWidth:"1px"},this.stlK0={backgroundColor:"#ddd"},this.stlK1={backgroundColor:"#eee"},"E"==m||"W"==m?(this.stlB.width=b+"px",this.stlB.height=c+"px",this.stlR.width=d+"px",this.stlR.height=e+"px",this.stlR.left=(b-d)/2-1+"px",this.stlR.top=(c-e)/2-1+"px",this.stlK.width=j+"px",this.stlK.height=k+"px",this.stlK.top=this.dx+"px"):(this.stlB.width=c+"px",this.stlB.height=b+"px",this.stlR.width=e+"px",this.stlR.height=d+"px",this.stlR.top=(b-d)/2-1+"px",this.stlR.left=(c-e)/2-1+"px",this.stlK.width=k+"px",this.stlK.height=j+"px",this.stlK.left=this.dx+"px");var n=document.createElement("span");this.box=n;var s=document.createElement("span");g(s,y),this.boxSpan=new i(this,n,s,this.stlB,this.stlB0,this.stlB1);var t=document.createElement("span");this.range=t;var u=document.createElement("span");g(u,y),this.rangeSpan=new i(this,t,u,this.stlR,this.stlR0,this.stlR1);var v=document.createElement("span");this.knob=v,this.knobSpan=new i(this,v,v,this.stlK,this.stlK0,this.stlK1),this.spans=[this.boxSpan,this.rangeSpan,this.knobSpan];var w="undefined"==typeof this.current.active||this.current.active;if(w&&(n.addEventListener("touchstart",r),v.addEventListener("mousedown",l(this)),v.addEventListener("touchstart",o(this)),v.addEventListener("touchmove",p(this)),v.addEventListener("touchend",q(this))),this.current.onCreate&&this.current.onCreate.apply(this),t.appendChild(u),t.appendChild(v),n.appendChild(s),n.appendChild(t),n.ondragstart=f,n.onselectstart=f,a.appendChild(n),!this.parent&&this.bins.length>1){var x=this;this.resize=function(){x.onResize()},window.addEventListener("resize",this.resize)}this.current.parent=a,this.parent=a,this.setValue(),g(this.box,"undefined"==typeof this.dragX?this.stlB0:this.stlB1),g(this.box,this.stlB),g(this.range,"undefined"==typeof this.dragX?this.stlR0:this.stlR1),g(this.range,this.stlR),g(this.knob,"undefined"==typeof this.dragX?this.stlK0:this.stlK1),g(this.knob,this.stlK)},s.prototype.getBox=function(){return this.boxSpan},s.prototype.getRange=function(){return this.rangeSpan},s.prototype.getKnob=function(){return this.knobSpan},s.prototype.setValue=function(a){if("undefined"==typeof a)a=this.data.val;else if(!this.data.setValue(a))return;a=this.data.val,"N"!=this.pos&&"W"!=this.pos||(a=1-a),a*=this.rh,this.coord=a,a+=this.dy,"N"==this.pos||"S"==this.pos?(this.stlK.top=a+"px",this.knob.style.top=a+"px"):(this.stlK.left=a+"px",this.knob.style.left=a+"px")},s.prototype.onMove=function(a,b){var c;c="N"==this.pos||"S"==this.pos?this.coord+b-this.dragY:this.coord+a-this.dragX,c<0&&(c=0),c>this.rh&&(c=this.rh),this.move(c)},s.prototype.move=function(a){if(this.coord!=a){"N"==this.pos||"S"==this.pos?(this.knob.style.top=a+this.dy+"px",this.stlK.top=this.knob.style.top,this.dragY+=a-this.coord):(this.knob.style.left=a+this.dy+"px",this.stlK.left=this.knob.style.left,this.dragX+=a-this.coord);var b=a/this.rh;"N"!=this.pos&&"W"!=this.pos||(b=1-b),this.data.setValue(b)&&this.data.emit(this),this.coord=a}},s.prototype.forward=function(a){this.emit(a),this.data.read(a)&&this.setValue()},t.prototype=new j,t.prototype.createAt=function(a){a.innerHTML="";var b=parseInt(this.current.bh),c=parseInt(this.current.bw),d=parseInt(this.current.rh);d||(d=128),this.rh=d;var e=parseInt(this.current.rw);e||(e=128),this.rw=e;var j=parseInt(this.current.kh);j||(j=24);var k=parseInt(this.current.kw);k||(k=16);var m=this.current.pos.toUpperCase();this.pos=m,this.dataX||(this.dataX=new h(this.current.dataX),this.dataY=new h(this.current.dataY),"undefined"!=typeof this.current.dataX||"undefined"==typeof this.current.dataY||this.dataY.msb||(this.dataX=new h("mod")),"undefined"!=typeof this.current.dataY||this.dataX.msb||(this.dataY=new h("mod")),this.dataX.chan=this.chan,this.dataY.chan=this.chan,this.dataX.setBase(this.current.baseX),this.dataY.setBase(this.current.baseY),this.dataX.setValue(this.current.valX),this.dataY.setValue(this.current.valY)),this.dx=-(k/2+1),this.dy=-(j/2+1),b||(b=j+d+2),c||(c=k+e+2),this.stlB={display:"inline-block",position:"relative",margin:"0",padding:"0",userSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",MsUserSelect:"none",OUserSelect:"none",WebkitUserSelect:"none"},this.stlB0={borderStyle:"none"},this.stlB1={borderStyle:"none"},this.stlR={display:"inline-block",position:"absolute",margin:"0",padding:"0",borderStyle:"solid",borderWidth:"1px"},this.stlR0={backgroundColor:"#aaa"},this.stlR1={backgroundColor:"#bbb"},this.stlK={display:"inline-block",position:"absolute",margin:"0",padding:"0",borderStyle:"solid",borderWidth:"1px"},this.stlK0={backgroundColor:"#ddd"},this.stlK1={backgroundColor:"#eee"},"E"==m||"W"==m?(this.stlB.width=b+"px",this.stlB.height=c+"px",this.stlR.width=d+"px",this.stlR.height=e+"px",this.stlR.left=(b-d)/2-1+"px",this.stlR.top=(c-e)/2-1+"px",this.stlK.width=j+"px",this.stlK.height=k+"px",this.stlK.top=this.dx+"px"):(this.stlB.width=c+"px",this.stlB.height=b+"px",this.stlR.width=e+"px",this.stlR.height=d+"px",this.stlR.top=(b-d)/2-1+"px",this.stlR.left=(c-e)/2-1+"px",this.stlK.width=k+"px",this.stlK.height=j+"px",this.stlK.left=this.dx+"px");var n=document.createElement("span");this.box=n;var s=document.createElement("span");g(s,y),this.boxSpan=new i(this,n,s,this.stlB,this.stlB0,this.stlB1);var t=document.createElement("span");this.range=t;var u=document.createElement("span");g(u,y),this.rangeSpan=new i(this,t,u,this.stlR,this.stlR0,this.stlR1);var v=document.createElement("span");this.knob=v,this.knobSpan=new i(this,v,v,this.stlK,this.stlK0,this.stlK1),this.spans=[this.boxSpan,this.rangeSpan,this.knobSpan];var w="undefined"==typeof this.current.active||this.current.active;if(w&&(n.addEventListener("touchstart",r),v.addEventListener("mousedown",l(this)),v.addEventListener("touchstart",o(this)),v.addEventListener("touchmove",p(this)),v.addEventListener("touchend",q(this))),this.current.onCreate&&this.current.onCreate.apply(this),t.appendChild(u),t.appendChild(v),n.appendChild(s),n.appendChild(t),n.ondragstart=f,n.onselectstart=f,a.appendChild(n),!this.parent&&this.bins.length>1){var x=this;this.resize=function(){x.onResize()},window.addEventListener("resize",this.resize)}this.current.parent=a,this.parent=a,this.setValue(),g(this.box,"undefined"==typeof this.dragX?this.stlB0:this.stlB1),g(this.box,this.stlB),g(this.range,"undefined"==typeof this.dragX?this.stlR0:this.stlR1),g(this.range,this.stlR),g(this.knob,"undefined"==typeof this.dragX?this.stlK0:this.stlK1),g(this.knob,this.stlK)},t.prototype.getBox=function(){return this.boxSpan},t.prototype.getRange=function(){return this.rangeSpan},t.prototype.getKnob=function(){return this.knobSpan},t.prototype.setValue=function(a,b){if("undefined"==typeof a)a=this.dataX.val,b=this.dataY.val;else if(!this.dataX.setValue(a)&&!this.dataY.setValue(b))return;a=this.dataX.val,b=this.dataY.val,"N"!=this.pos&&"W"!=this.pos||(b=1-b),"S"!=this.pos&&"W"!=this.pos||(a=1-a),a*=this.rw,b*=this.rh,"N"==this.pos||"S"==this.pos?(this.coordX=a,this.coordY=b):(this.coordX=b,this.coordY=a),a+=this.dx,b+=this.dy,"N"==this.pos||"S"==this.pos?(this.stlK.left=a+"px",this.stlK.top=b+"px"):(this.stlK.top=a+"px",this.stlK.left=b+"px"),this.knob.style.left=this.stlK.left,this.knob.style.top=this.stlK.top},t.prototype.onMove=function(a,b){a=this.coordX+a-this.dragX,b=this.coordY+b-this.dragY,a<0&&(a=0),b<0&&(b=0),"N"==this.pos||"S"==this.pos?(a>this.rw&&(a=this.rw),b>this.rh&&(b=this.rh),this.knob.style.left=a+this.dx+"px",this.knob.style.top=b+this.dy+"px"):(a>this.rh&&(a=this.rh),b>this.rw&&(b=this.rw),this.knob.style.left=a+this.dy+"px",this.knob.style.top=b+this.dx+"px"),this.stlK.left=this.knob.style.left,this.stlK.top=this.knob.style.top,this.dragX+=a-this.coordX,this.dragY+=b-this.coordY,this.coordX=a,this.coordY=b,"E"!=this.pos&&"W"!=this.pos||(a=this.coordY,b=this.coordX),a/=this.rw,b/=this.rh,"N"!=this.pos&&"W"!=this.pos||(b=1-b),"S"!=this.pos&&"W"!=this.pos||(a=1-a),this.dataX.setValue(a)&&this.dataX.emit(this),this.dataY.setValue(b)&&this.dataY.emit(this)},t.prototype.forward=function(a){this.emit(a),(this.dataX.read(a)||this.dataY.read(a))&&this.setValue()},u.prototype._info=function(b){return{type:"html/javascript",name:a(b,"Slider"),manufacturer:"virtual",version:x}},u.prototype._openIn=function(a,b){var c=new s(this._arg);c.create(),c.emit=function(b){a._emit(b)},a._info=this._info(b),a._receive=function(a){c.forward(a)},a._close=function(){c._close()},a.settings=function(){return c.settings()},a.getBox=function(){return c.boxSpan},a.getRange=function(){return c.rangeSpan},a.getKnob=function(){return c.knobSpan},a.setValue=function(a){c.setValue(a)},a._resume()},JZZ.input.Slider=function(){var a,b;1==arguments.length?"string"==typeof arguments[0]?a=arguments[0]:b=arguments[0]:(a=arguments[0],b=arguments[1]);var c=new u;return c._arg=b,JZZ.lib.openMidiIn(a,c)},JZZ.input.Slider.register=function(){var a,b;1==arguments.length?"string"==typeof arguments[0]?a=arguments[0]:b=arguments[0]:(a=arguments[0],b=arguments[1]);var c=new u;return c._arg=b,JZZ.lib.registerMidiIn(a,c)},v.prototype._info=function(b){return{type:"html/javascript",name:a(b,"Pad"),manufacturer:"virtual",version:x}},v.prototype._openIn=function(a,b){var c=new t(this._arg);c.create(),c.emit=function(b){a._emit(b)},a._info=this._info(b),a._receive=function(a){c.forward(a)},a._close=function(){c._close()},a.settings=function(){return c.settings()},a.getBox=function(){return c.boxSpan},a.getRange=function(){return c.rangeSpan},a.getKnob=function(){return c.knobSpan},a.setValue=function(a){c.setValue(a)},a._resume()},JZZ.input.Pad=function(){var a,b;1==arguments.length?"string"==typeof arguments[0]?a=arguments[0]:b=arguments[0]:(a=arguments[0],b=arguments[1]);var c=new v;return c._arg=b,JZZ.lib.openMidiIn(a,c)},JZZ.input.Pad.register=function(){var a,b;1==arguments.length?"string"==typeof arguments[0]?a=arguments[0]:b=arguments[0]:(a=arguments[0],b=arguments[1]);var c=new v;return c._arg=b,JZZ.lib.registerMidiIn(a,c)}}}();